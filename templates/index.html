{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cella</title>
    <link rel="icon" href="{% static 'icons/logo.svg' %}" type="image/svg+xml">
    <style>
        @font-face{
            font-family: 'AgaveNerdFontMono-Regular';
            src: url("{% static 'fuente/AgaveNerdFontMono-Regular.ttf' %}") format('truetype');
        }
        body{
            font-family: 'AgaveNerdFontMono-Regular';
        }
        
    </style>
    <link rel="stylesheet" href="{% static 'estilos.css' %}">
    <script src="{% static 'funcionalidad.js' %}"></script>

</head>
<body style='background-color: rgb(63, 51, 63);'>
    <header>
        <div style="padding: 0.5rem; display: flex">
            <button onclick="animacionHeader()" class="botonInicio">
                <div class="logotipo">
                    <img src="{% static 'icons/logo.svg' %}" style="height: 3.5rem; width: 3.5rem;">
                    <h2 style="padding-left: 0.5rem;">CELLA</h2>
                </div>
            </button>
            <div id="header-botones">
                <button class="header-menu" onclick="window.CrearCarpertaFormulario.showModal()"> crear carpeta</button>
                <dialog id="CrearCarpertaFormulario">
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="DirDelRoot" value="{{ ruta }}">
                        <input required type="text" name="nameDir">
                        <button type="submit" name="meakedir"> crear </button>

                    </form>
                    
                    <button onclick="window.CrearCarpertaFormulario.close()"> cerrar</button>

                </dialog>
                <button onclick="window.subirMenuFile.showModal();" class="header-menu">Subir archivo</button>
                <button onclick="window.subirMenuDir.showModal();" class="header-menu">Subir carpeta</button>
            </div>
        </div>
 
    </header>
    <main>

        <dialog id="subirMenuDir">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input name="root" type='hidden' value="{{ ruta }}">
                <input name="dirUp" type="file" webkitdirectory directory >
                <button  type="submit">enviar</button>
            </form>
            <button onclick="window.subirMenuDir.close();">cerrar</button>
        </dialog>

        <dialog id="subirMenuFile">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input name="root" type='hidden' value="{{ ruta }}">
                <input name="fileUp" type="file"  >
                <button type="submit">enviar</button>
            </form>
            <button onclick="window.subirMenuFile.close();">cerrar</button>
        </dialog>

        

        <dialog id="renombrarMenu">
            <form  method="post">
                {% csrf_token %}
                <div id="renombrarContext">

                </div>
                <input name="root" type='hidden' value="{{ ruta }}">
                <input name="NewName" required type="text">
                <button type="submit" name='rename' >confimarar</button>
            </form>
            <button onclick="window.renombrarMenu.close()">cerrar</button>
        </dialog>

    {% if error  %}
        <dialog open id="errorCella">
            {{ error }}
            <button onclick="window.errorCella.close()"> cerrar</button>
        </dialog>
    {% endif %}


        <div style="background-color: rgb(120, 65, 122); ">
            <center>
                {% if ruta %}
                   <p class="estiloNavegar">Inicio/{{ ruta }}</p>
                   <form method="post">
                    {% csrf_token %}
                        <button class="botonesAccionesCS"  name="back" value="{{ ruta }}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M6.325 12.85q-.225-.15-.337-.375T5.874 12t.113-.475t.337-.375l8.15-5.175q.125-.075.263-.112T15 5.825q.4 0 .7.288t.3.712v10.35q0 .425-.3.713t-.7.287q-.125 0-.262-.038t-.263-.112z"/></svg></button>
                        <button class="botonesAccionesCS" ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 19v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-3q-.425 0-.712-.288T14 20v-5q0-.425-.288-.712T13 14h-2q-.425 0-.712.288T10 15v5q0 .425-.288.713T9 21H6q-.825 0-1.412-.587T4 19"/></svg></button>
                   </form>
                    
                {% else %}
                    <p class="estiloNavegar">Inicio</p>
                {% endif %}
            </center> 
        </div>
 
        <div class='contenido'>
            <h2 style="padding-bottom: 0.2rem;">carpetas</h2>
            {% for i in carpetas%}

            <form class="selectDatoCSS" method="post" style="width:98%; ">
                {% csrf_token %}
                {% if ruta %}
                <input name="root" type='hidden' value="{{ ruta }}">
                {% endif %}
                <div style="display:flex; justify-content:space-between; ">
                    <button class="carpetaLink" name="dir" value="{{ i }}" >{{ i }}</button>
                    <div>
                        <button class="botonesAccionesCS" type="submit" name='dirDown' value="{{  i }}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 22v-2h16v2zm8-4L5 9h4V2h6v7h4z"/></svg></button>    
                        <button class="botonesAccionesCS" type="button" onclick="renombrar('{{i}}','dir'); "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M2 24v-4h20v4zm2-6v-4.25L15.2 2.575q.275-.275.638-.425T16.6 2t.775.15t.675.45L19.425 4q.3.275.438.65t.137.775q0 .375-.137.738t-.438.662L8.25 18zM16.6 6.8L18 5.4L16.6 4l-1.4 1.4z"/></svg></button>
                        <button class="botonesAccionesCS" type="submit" name='del' value="{{  i }}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"/></svg></button>            
                    </div>
                </div>


            </form>

           

            <br>
            {% endfor %}
  
            <h2 style="padding-top: 0.2rem; padding-bottom:  0.2rem;">archivos</h2>
            {% for i in archivos%}
        
            <form class="selectDatoCSS" method="post" style="width:98%;">
                {% csrf_token %}
    
                <div style="display:flex; justify-content:space-between; max-height: 3em; align-items: center;">
                    <p class='FlesName'> {{ i }} </p>
                    <div >
                        <input name="type" type='hidden' value='file'>
                        <input name="root" type='hidden' value="{{ ruta }}">
                        <button class="botonesAccionesCS" type="submit" name='fileDown' value="{{  i }}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 22v-2h16v2zm8-4L5 9h4V2h6v7h4z"/></svg></button>    
                        <button class="botonesAccionesCS" type="button" onclick="renombrar('{{i}}','file'); "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M2 24v-4h20v4zm2-6v-4.25L15.2 2.575q.275-.275.638-.425T16.6 2t.775.15t.675.45L19.425 4q.3.275.438.65t.137.775q0 .375-.137.738t-.438.662L8.25 18zM16.6 6.8L18 5.4L16.6 4l-1.4 1.4z"/></svg></button>  
                        <button class="botonesAccionesCS" type="submit" name='del' value="{{  i }}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"/></svg></button>  
                   
                    </div>
                </div>

            </form>
            <br>
            {% endfor %}
        </div>
    </main>
    <footer >
              
        <a style="border-radius: 10%; background-color: rgb(221, 211, 211); padding: 0.2rem;" href="{% url 'core:cierre' %}">Cerrar</a>
    </footer> 
        
</body>
</html>

